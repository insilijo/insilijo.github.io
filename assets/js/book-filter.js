!function(){"use strict";function e(){function e(e){s.style.display=void 0===e?"none"===s.style.display?"block":"none":e?"block":"none";const t=document.querySelector(".book-filter-icon");if(t){const e=t.querySelector("i");e&&("block"===s.style.display?(e.classList.remove("fa-chevron-down"),e.classList.add("fa-chevron-up")):(e.classList.remove("fa-chevron-up"),e.classList.add("fa-chevron-down")))}}function t(e){const t=Array.from(e.querySelectorAll(".book-filter-option"));t.sort((e,t)=>{const o=parseInt(e.getAttribute("data-count")||"0");return parseInt(t.getAttribute("data-count")||"0")-o}),e.innerHTML="",t.forEach(t=>{e.appendChild(t)})}function o(e){r.querySelectorAll(".book-filter-option").forEach(t=>{t.textContent.toLowerCase().includes(e)?t.style.display="flex":t.style.display="none"})}function n(){const e=document.getElementById("book-filter-clear");if(c.querySelectorAll(".book-filter-chip").forEach(e=>e.remove()),0===y.size)return e&&(e.style.display="none"),void(c.style.display="none");c.style.display="flex",e&&(e.style.display="inline-block"),y.forEach(t=>{const o=document.createElement("span");o.className="book-filter-chip",o.style.cssText="display: inline-flex; align-items: center; padding: 0.25rem 0.5rem; background: var(--global-theme-color); color: var(--global-bg-color); border-radius: 4px; font-size: 0.85rem; gap: 0.5rem;";const i=t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());o.innerHTML=`\n          <span>${i}</span>\n          <button class="book-filter-chip-remove" style="background: none; border: none; color: inherit; cursor: pointer; padding: 0; margin: 0; font-size: 1rem; line-height: 1; opacity: 0.8;" aria-label="Remove ${i}">\n            <i class="fa-solid fa-times"></i>\n          </button>\n        `;o.querySelector(".book-filter-chip-remove").addEventListener("click",function(e){e.stopPropagation(),y.delete(t);const o=document.querySelector(`.book-filter-checkbox[value="${t}"]`);o&&(o.checked=!1),n(),l(y,a)}),e?c.insertBefore(o,e):c.appendChild(o)})}function l(e,t){const o=e.size>0;t.forEach(t=>{const n=t.getAttribute("data-categories");if(o)if(n){const o=n.split(" ").filter(e=>e.trim());Array.from(e).some(e=>o.includes(e))?(t.classList.remove("hidden"),t.style.display=""):(t.classList.add("hidden"),t.style.display="none")}else t.classList.add("hidden"),t.style.display="none";else t.classList.remove("hidden"),t.style.display=""});document.querySelectorAll('h1[id^="y"]').forEach(e=>{const t=e.nextElementSibling;if(t&&"UL"===t.tagName){0===t.querySelectorAll(".book-item:not(.hidden)").length&&o?(e.style.display="none",t.style.display="none"):(e.style.display="",t.style.display="")}});const n=document.querySelector("h1");if(n&&"Reading"===n.textContent.trim()){const e=n.nextElementSibling;if(e&&e.classList.contains("reading")){0===e.querySelectorAll(".book-item:not(.hidden)").length&&o?(n.style.display="none",e.style.display="none"):(n.style.display="",e.style.display="")}}const l=document.querySelector("h1");let i=null;const s=document.querySelectorAll("h1");for(let e of s)if("Favorites"===e.textContent.trim()){l=e,i=l.nextElementSibling;break}if(l&&"Favorites"===l.textContent.trim()&&(i||(i=l.nextElementSibling),i&&i.classList.contains("favorites"))){0===i.querySelectorAll(".book-item:not(.hidden)").length&&o?(l.style.display="none",i.style.display="none"):(l.style.display="",i.style.display="")}}const i=document.getElementById("book-filter-search"),s=document.getElementById("book-filter-dropdown-menu"),r=document.getElementById("book-filter-options"),c=document.getElementById("book-filter-selected"),a=document.querySelectorAll(".book-item");let d=document.querySelectorAll(".book-filter-checkbox");if(!i||!s||0===a.length)return;t(r),d=document.querySelectorAll(".book-filter-checkbox");let y=new Set;i.addEventListener("click",function(t){t.stopPropagation(),e()}),i.addEventListener("focus",function(){e(!0)}),document.addEventListener("click",function(t){t.target.closest(".book-filter-container")||e(!1)}),i.addEventListener("input",function(){o(this.value.toLowerCase())}),d.forEach(e=>{e.addEventListener("change",function(){const e=this.value;this.checked?y.add(e):y.delete(e),n(),l(y,a)})});const u=document.getElementById("book-filter-clear");u&&u.addEventListener("click",function(){y.clear(),d.forEach(e=>{e.checked=!1}),i.value="",o(""),n(),l(y,a)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();